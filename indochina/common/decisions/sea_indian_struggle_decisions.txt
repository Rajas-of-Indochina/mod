restore_indo_greek_kingdom_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_personal_religious.dds"
	major = yes
	desc = restore_indo_greek_kingdom_decision_desc

	ai_check_interval = 120

	is_shown = {
		capital_county.title_province = {
			geographical_region = custom_indo_greek_kingdom
		}
		# Need to have a cultural or religious tie to the Hellenes:
		OR = {
			has_religion = religion:hellenism_religion
			culture = culture:greek
			culture = {
				any_parent_culture = { this = culture:greek }
			}
		}
	}

	is_valid = {
		is_independent_ruler = yes
		prestige_level >= 4
		# # Must be of the right religion: Buddhist, Zoroastrian, Hindu or Greco-Roman
		OR = {
			has_religion = religion:hellenism_religion
			has_religion = religion:zoroastrianism_religion
			has_religion = religion:buddhism_religion
			has_religion = religion:hinduism_religion
		}
		# # Must have Greek roots, and either Byzantine or Indo-aryan heritage
		OR = {
			culture = culture:greek
			culture = {
				any_parent_culture = { this = culture:greek }
				OR = {
					has_cultural_pillar = heritage_byzantine
					has_cultural_pillar = heritage_indo_aryan
				}
			}
		}
		OR = {
			# Greco-bactria was kinda the predecessor to the Indo-Greek Kingdom
			highest_held_title_tier <= tier_kingdom
			has_title = title:e_bactria
		}
		completely_controls_region = custom_indo_greek_kingdom_heartland
	}

	is_valid_showing_failures_only = {
		is_available_at_peace_adult = yes
	}

	effect = {
		custom_tooltip = {
			text = indo_greek_de_jure_tt
		}
		hidden_effect = {
			indo_greek_de_jure_effect = yes
		}
		create_title_and_vassal_change = {
			type = created
			save_scope_as = change
		}
		title:e_indo_greek_kingdom = {
			change_title_holder = {
				holder = ROOT
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change
		show_as_tooltip = {
			reform_indo_hellenism_effect = yes
			custom_tooltip = reform_indo_hellenism.desc
			random_list = {
				100 = {
					show_chance = no
					desc = reform_indo_hellenism.buddhist
					greco_buddhism_effect = yes
				}
				100 = {
					show_chance = no
					desc = reform_indo_hellenism.hindu
					greco_hinduism_effect = yes
				}
				100 = {
					show_chance = no
					desc = reform_indo_hellenism.zoroastrian
					greco_zoroastrianism_effect = yes
				}
				100 = {
					show_chance = no
					desc = reform_indo_hellenism.default
					indo_greek_flexibility = yes
					#Always available
				}
			}
		}
		hidden_effect = {
			trigger_event = south_asia.0042
		}
	}
}

indo_greek_culture_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_personal_religious.dds"
	major = yes
	desc = indo_greek_culture_decision_desc
	ai_check_interval = 120

	is_shown = {
		capital_county.title_province = {
			OR = {
				# gotte be kinda sorta near historical indo-greek lands
				geographical_region = world_india_rajastan
				geographical_region = custom_indo_greek_kingdom
			}
		}
		OR = {
			# Needs to be either Indo-Aryan or have some kind of Greek cultural roots
			culture = { has_cultural_pillar = heritage_indo_aryan }
			culture = { any_parent_or_above = { this = culture:greek } }
			culture = { has_cultural_pillar = language_greek }
			# Or at least speek Greek
			knows_language = language_greek
		}
	}

	is_valid = {
		# Famous
		prestige_level >= 3
		# Speeks Greek
		knows_language = language_greek
		# Greeks (or post-greeks) and Indo-Aryans coexist within your realm
		OR = {
			AND = {
				any_powerful_vassal = {
					culture = {
						OR = {
							this = culture:greek
							any_parent_or_above = { this = culture:greek }
							culture = { has_cultural_pillar = language_greek }
						}
					}
				}
				any_powerful_vassal = {
					culture = { has_cultural_pillar = heritage_indo_aryan }
				}
			}
			AND = {
				any_sub_realm_county = {
					culture = {
						OR = {
							this = culture:greek
							any_parent_or_above = { this = culture:greek }
							culture = { has_cultural_pillar = language_greek }
						}
					}
				}
				any_sub_realm_county = {
					culture = { has_cultural_pillar = heritage_indo_aryan }
				}
			}

		}
	}

	is_valid_showing_failures_only = {
		is_available_at_peace_adult = yes
	}

	effect = {
		add_gold = 1
		show_as_tooltip = {
			indo_greek_culture_decision_effect = yes
		}
	}
}

establish_indian_kingdom_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_personal_religious.dds"
	major = yes
	desc = establish_indian_kingdom_decision

	ai_check_interval = 120

	is_shown = {
		any_realm_title = {
			title_province.geographical_region = india_struggle_region # Need to hold some indian clay
		}
		OR = { # Must from an uninvolved religion or culture
			NOT = { struggle:india_struggle = { is_culture_involved_in_struggle = ROOT.culture } }
			NOT = { struggle:india_struggle = { is_faith_involved_in_struggle = ROOT.faith } }
		}
	}

	is_valid = {
		# Interloper in the Indian Struggle
		any_character_struggle = {
			involvement = interloper
			is_struggle_type = india_struggle
		}
		OR = {
			# Need to hold a kingdom or empire in the Indian Struggle region
			any_held_title = {
				any_in_de_jure_hierarchy = {
					title_province.geographical_region = india_struggle_region
				}
				tier >= tier_kingdom
			}
			# Or we can make an exception for Ghaznavids or their alt-historical replacements
			has_primary_title = title:k_kabulistan
		}
	}

	effect = {
		if = {
			limit = { NOT = { is_culture_involved_in_struggle = ROOT.culture } }
			# TODO: Culture nickname
			set_culture_as_involved = root.culture
		}
		if = {
			limit = { NOT = { is_faith_involved_in_struggle = ROOT.faith } }
			# TODO: Culture nickname
			set_faith_as_involved = root.faith
		}
		add_prestige = large_prestige_gain
	}
}

become_chakravarti_decision = {# Uniting India

	picture = "gfx/interface/illustrations/decisions/dharma_decision_chakravatin.dds"
	major = yes
	title = {
		first_valid = {
			triggered_desc = {# For Dharmic Faiths
				trigger = {	religion = { is_in_family = rf_eastern } }
				desc = become_chakravarti_decision_title_dharmic
			}
			triggered_desc = {# For Muslim Faiths
				trigger = {	religion = religion:islam_religion	}
				desc = become_chakravarti_decision_title_muslim
			}
			triggered_desc = { # Greek Time
				trigger = {
					OR = {
						culture = culture:greek
						culture = {
							any_parent = culture:greek
						}
						culture = {
							has_cultural_pillar = language_greek
						}
						religion = religion:hellenism_religion
					}
				}
				desc = become_chakravarti_decision_title_greek
			}
			desc = become_chakravarti_decision_title_else
		}
	}

	desc = {
		first_valid = {
			triggered_desc = {# For Dharmic Faiths
				trigger = { religion = { is_in_family = rf_eastern } }
				desc = become_chakravarti_decision_desc_dharmic
			}
			triggered_desc = {# For Muslim Faiths
				trigger = { religion = religion:islam_religion }
				desc = become_chakravarti_decision_desc_muslim
			}			
			triggered_desc = { # Greek Time
				trigger = {
					OR = {
						culture = culture:greek
						culture = {
							any_parent = culture:greek
						}
						culture = {
							has_cultural_pillar = language_greek
						}
						religion = religion:hellenism_religion
					}
				}
				desc = become_chakravarti_decision_desc_greek
			}
			desc = become_chakravarti_decision_desc_else
		}
	}
	confirm_click_sound = "event:/DLC/FP2/SFX/UI/fp2_struggle_ending_decision_confirm"
	is_invisible = yes
	sort_order = 80
	
	ai_check_interval = 120

	is_shown = {
		always = yes
	}
	# is_shown = {
	# 	highest_held_title_tier >= tier_kingdom
	# 	capital_province = {
	# 		geographical_region = world_india
	# 	}
		
	# 	NOT = {
	# 		is_target_in_global_variable_list = {
	# 			name = unavailable_unique_decisions
	# 			target = flag:become_chakravarti_decision
	# 		}
	# 	}
	# }

	is_valid = {
		capital_province = {
			geographical_region = india_struggle_region
		}
		any_character_struggle = {
			involvement = involved
			is_struggle_type = iberian_struggle
		}
		india_struggle_dominant_phase_trigger = yes
		has_title = title:e_rajastan
		has_title = title:e_deccan
		has_title = title:e_bengal
		piety_level >= 5
		NOT = {
			# No independent infidel controls more than 20% of India
			struggle:indian_struggle = {
				any_involved_ruler = {
					NOT = { this = root }
					is_independent_ruler = yes
					NOT = { religion = root.religion }
					exists = primary_title
					primary_title = { is_mercenary_company = no }
					save_temporary_scope_as = indian_realm
					any_county_in_region = {
						region = india_struggle_region
						percent > fp2_struggle_hostility_region_percent_decimal_value
						holder.top_liege = scope:indian_realm
					}
				}
			}
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_independent_ruler = yes
	}

	cost = {
		piety = {
			value = massive_piety_value
		}
		gold = {
			value = massive_gold_value
		}
	}

	effect = {
		#Can only happen once
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:become_chakravarti_decision
		}

		custom_tooltip = become_chakravarti_decision_indian_empires_unite_effect
		custom_tooltip = become_chakravarti_decision_new_primary_title_effect
		if = {# For Dharmic Rulers
			limit = { religion = { is_in_family = rf_eastern } }
			show_as_tooltip = {
				add_trait = chakravarti
				add_prestige = massive_prestige_value
				add_prestige_level = 2
			}
			save_scope_as = chakravarti

			trigger_event = south_asia.0001 #I became the Chakravarti
			add_to_temporary_list = received_notification
			every_vassal_or_below = {
				if = {
					limit = {
						OR = {
							faith.religion = faith:vaishnavism.religion
							faith.religion = faith:theravada.religion
							faith.religion = faith:digambara.religion		
						}
					}
					trigger_event = south_asia.0002 #My ruler became the Chakravarti
				}
				else = {
					trigger_event = south_asia.0003 #My ruler became the Chakravarti - convert?
				}
				add_to_temporary_list = received_notification
			}
			every_ruler = {
				limit = {
					NOT = {
						is_in_list = received_notification
					}
				}

				trigger_event = south_asia.0004 #Someone has become the Chakravarti
			}


		}
		if = {# For Muslims Rulers
			limit = { religion = religion:islam_religion }
			show_as_tooltip = {
				add_prestige = massive_prestige_value
				add_prestige_level = 2
			}
			save_scope_as = chakravarti

			trigger_event = south_asia.0001 #I became the Chakravarti
			add_to_temporary_list = received_notification
			every_vassal_or_below = {
				if = {
					limit = { religion = religion:islam_religion }
					trigger_event = south_asia.0002 #My ruler became the Chakravarti
				}
				else = {
					trigger_event = south_asia.0003 #My ruler became the Chakravarti - convert?
				}
				add_to_temporary_list = received_notification
			}
			every_ruler = {
				limit = {
					NOT = {
						is_in_list = received_notification
					}
				}
				trigger_event = south_asia.0004 #Someone has become the Chakravarti
			}
		}
		if = {# For Other Rulers
			limit = {
				NOT = {
					religion = religion:islam_religion
					faith.religion = { is_in_family = rf_eastern }
				}
			}
			show_as_tooltip = {
				add_prestige = massive_prestige_value
				add_prestige_level = 2
			}
			save_scope_as = chakravarti

			trigger_event = south_asia.0001 #I became the Chakravarti
			add_to_temporary_list = received_notification
			every_vassal_or_below = {
				trigger_event = south_asia.0003 # My ruler became the Chakravarti - convert?
				add_to_temporary_list = received_notification
			}
			every_ruler = {
				limit = {
					NOT = {
						is_in_list = received_notification
					}
				}
				trigger_event = south_asia.0004 #Someone has become the Chakravarti
			}
		}
	}

	ai_will_do = {
		base = 100
	}
}
take_stewardship_of_the_sacred_river_decision = {# Become Lord/Lady of the Sacred River
	picture = "gfx/interface/illustrations/decisions/dharma_decision_sacred_rivers.dds"
	major = yes
	ai_check_interval = 120
	desc = take_stewardship_of_the_sacred_river_decision_desc

	is_shown = {
		OR = {
			religion = religion:hinduism_religion
			religion = religion:buddhism_religion
			religion = religion:jainism_religion
			religion = religion:indian_religion
			faith = { has_doctrine = tenet_eastern_syncretism }
		}
		highest_held_title_tier >= tier_duchy
		NOT = { has_character_modifier = ruler_of_the_ganges_modifier }
	}

	is_valid = {
		completely_controls_region = custom_ganges_plain
		custom_description = {
			text = capital_province_in_ganges_region
			capital_province = { geographical_region = custom_ganges_plain }
		}
		prestige_level >= 3
		piety_level >= 1
		custom_tooltip = {
			text = DOMINANT_RELIGION_TRIGGER
			india_struggle_dominant_phase_trigger = yes	
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		trigger_if = {
			limit = { has_global_variable = ruler_of_ganges }
			custom_description = {
				text = capital_province_in_ganges_region
				NOR = {
					AND = {
						global_var:ruler_of_ganges = {
							is_alive = yes
							target_is_liege_or_above = root
						}
					}
					AND = {
						global_var:ruler_of_ganges = { is_alive = yes }
						target_is_liege_or_above = global_var:ruler_of_ganges
					}
				}
			}
		}
	}

	cost = {
		piety = {
			value = major_prestige_value
		}
		gold = {
			value = major_gold_value
		}
	}

	effect = {
		show_as_tooltip = {
			take_stewardship_of_the_sacred_river_effect = yes
		}

		save_scope_as = ruler_of_ganges

		trigger_event = south_asia.0011
		add_to_temporary_list = ruler_of_ganges_notification_sent

		if = {
			limit = {
				exists = global_var:ruler_of_ganges
				global_var:ruler_of_ganges = {
					is_alive = yes
				}
			}
			global_var:ruler_of_ganges = {
				trigger_event = {
				 id = south_asia.0013 #Someone else has taken my title
				 days = 3
				}
				add_to_temporary_list = ruler_of_ganges_notification_sent
			}
		}

		if = { #Only send notification the first time the decision is taken
			limit = {
				NOT = { has_global_variable = ruler_of_ganges_notification_sent }
			}
			every_independent_ruler = {
				limit = {
					religion = religion:hinduism_religion
				}
				trigger_event = {
					id = south_asia.0012
					days = 3
				}
				add_to_temporary_list = ruler_of_ganges_notification_sent
			}
			set_global_variable = {
				name = ruler_of_ganges_notification_sent
				value = yes
			}
		}
	}

	ai_will_do = {
		base = 100
	}
}