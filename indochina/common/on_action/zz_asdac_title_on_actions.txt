#On actions about titles

# All on-actions in this file provide scope:transfer_type unless otherwise noted
# scope:transfer_type has the following permutations:
# flag:conquest
# flag:conquest_holy_war
# flag:conquest_claim
# flag:conquest_populist
# flag:inheritance
# flag:abdication
# flag:destroyed
# flag:created
# flag:usurped
# flag:granted
# flag:revoked
# flag:election
# flag:independency
# flag:returned
# flag:leased_out
# flag:lease_revoked
# flag:faction_demand
# flag:swear_fealty

# A title is transferred to a new character
# root = the new holder
# scope:title = the title that changes hands
# scope:previous_holder = previous holder. Might be dead
on_title_gain = {
	on_actions = {
		asdac_on_title_gain
	}
}
asdac_on_title_gain = {
	effect = {
		if = {
			limit = {
				scope:title = {
					tier >= tier_kingdom
				}
				has_nickname = nick_the_black_prince
				this = character:454501
			}
			give_nickname = nick_the_black
		}
		if = {
			limit = {
				#scope:title = { is_holy_order = yes }
				NOT = { has_trait = order_member }
				has_government = holy_order_government_2
			}
			add_trait = order_member
		}
	}
}