on_game_start = {
	on_actions = {
		initialize_minorities
		set_minorities_game_start
	}
}

on_game_start_after_lobby = {
    on_actions = {
        initial_spawn_minority_courtiers
    }
}

initialize_minorities = {
	effect = {
		set_global_variable = {
			name = sea_minority_is_active
			value = yes
		}
	}
}

# culture_minorities_large
# culture_minorities_small
# faith_minorities_large
# faith_minorities_small

set_minorities_game_start = {
	effect = {

		add_culture_minority_effect = {
			CULTURE = culture:kochinim
			SIZE = small
			COUNTY = title:c_kerala
		}
		add_faith_minority_effect = {
			FAITH = faith:malabarism
			SIZE = small
			COUNTY = title:c_kerala
		}


		add_culture_minority_effect = {
			CULTURE = culture:kochinim
			SIZE = small
			COUNTY = title:c_eranad
		}
		add_faith_minority_effect = {
			FAITH = faith:malabarism
			SIZE = small
			COUNTY = title:c_eranad
		}


		add_culture_minority_effect = {
			CULTURE = culture:kochinim
			SIZE = small
			COUNTY = title:c_alupa
		}
		add_faith_minority_effect = {
			FAITH = faith:malabarism
			SIZE = small
			COUNTY = title:c_alupa
		}


		add_faith_minority_effect = {
			FAITH = faith:malabarism
			SIZE = small
			COUNTY = title:c_kanara
		}

		add_faith_minority_effect = {
			FAITH = faith:malabarism
			SIZE = small
			COUNTY = title:c_panaji
		}


		# Yazidis

		add_faith_minority_effect = {
			FAITH = faith:yazidi
			SIZE = large
			COUNTY = title:c_ninive
		}
		add_faith_minority_effect = {
			FAITH = faith:yazidi
			SIZE = large
			COUNTY = title:c_nasibin
		}
		add_faith_minority_effect = {
			FAITH = faith:yazidi
			SIZE = large
			COUNTY = title:c_sinjar
		}


		# Jewish

		# Middle East

		add_faith_minority_effect = {
			FAITH = faith:samaritan
			SIZE = large
			COUNTY = title:c_jerusalem
		}
		add_faith_minority_effect = {
			FAITH = faith:orthodox
			SIZE = large
			COUNTY = title:c_jerusalem
		}
		add_culture_minority_effect = {
			CULTURE = culture:radhanite
			SIZE = large
			COUNTY = title:c_jerusalem
		}

		add_culture_minority_effect = {
			CULTURE = culture:radhanite
			SIZE = small
			COUNTY = title:c_alexandria
		}
		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_alexandria
		}
		add_faith_minority_effect = {
			FAITH = faith:coptic
			SIZE = large
			COUNTY = title:c_alexandria
		}

		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = large
			COUNTY = title:c_byzantion
		}
		add_culture_minority_effect = {
			CULTURE = culture:radhanite
			SIZE = large
			COUNTY = title:c_byzantion
		}
		add_faith_minority_effect = {
			FAITH = faith:ashari
			SIZE = small
			COUNTY = title:c_byzantion
		}

		# East

		add_faith_minority_effect = {
			FAITH = faith:manichean
			SIZE = small
			COUNTY = title:c_shazhou
		}
		add_faith_minority_effect = {
			FAITH = faith:ashari
			SIZE = small
			COUNTY = title:c_shazhou
		}
		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_shazhou
		}

		add_faith_minority_effect = {
			FAITH = faith:manichean
			SIZE = small
			COUNTY = title:c_liangzhou
		}
		add_faith_minority_effect = {
			FAITH = faith:ashari
			SIZE = small
			COUNTY = title:c_liangzhou
		}
		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_liangzhou
		}


		# Spain

		add_culture_minority_effect = {
			CULTURE = culture:sephardi
			SIZE = small
			COUNTY = title:c_cordoba
		}
		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_cordoba
		}


		add_culture_minority_effect = {
			CULTURE = culture:sephardi
			SIZE = small
			COUNTY = title:c_sevilla
		}
		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_sevilla
		}


		add_culture_minority_effect = {
			CULTURE = culture:sephardi
			SIZE = small
			COUNTY = title:c_granada
		}
		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_granada
		}


		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = large
			COUNTY = title:c_toledo
		}
		add_culture_minority_effect = {
			CULTURE = culture:sephardi
			SIZE = large
			COUNTY = title:c_toledo
		}


		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_barcelona
		}
		add_culture_minority_effect = {
			CULTURE = culture:sephardi
			SIZE = small
			COUNTY = title:c_barcelona
		}


		# France

		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_carcassonne
		}
		add_culture_minority_effect = {
			CULTURE = culture:ashkenazi
			SIZE = small
			COUNTY = title:c_carcassonne
		}


		# Germany

		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_metz
		}
		add_culture_minority_effect = {
			CULTURE = culture:ashkenazi
			SIZE = small
			COUNTY = title:c_metz
		}


		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_speyer
		}
		add_culture_minority_effect = {
			CULTURE = culture:ashkenazi
			SIZE = small
			COUNTY = title:c_speyer
		}


		# Morocco

		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_tangiers
		}
		add_culture_minority_effect = {
			CULTURE = culture:ashkenazi
			SIZE = small
			COUNTY = title:c_tangiers
		}


		# Insular Christians

		add_faith_minority_effect = {
			FAITH = faith:insular_celtic
			SIZE = large
			COUNTY = title:c_dublin
		}
		add_culture_minority_effect = {
			CULTURE = culture:irish
			SIZE = large
			COUNTY = title:c_dublin
		}


		# Egypt

		add_faith_minority_effect = {
			FAITH = faith:coptic
			SIZE = large
			COUNTY = title:c_cairo
		}

		# Baghdad

		add_faith_minority_effect = {
			FAITH = faith:karaism
			SIZE = large
			COUNTY = title:c_baghdad
		}
		add_culture_minority_effect = {
			CULTURE = culture:radhanite
			SIZE = large
			COUNTY = title:c_baghdad
		}

		add_faith_minority_effect = {
			FAITH = faith:karaism
			SIZE = large
			COUNTY = title:c_samarra
		}
		add_culture_minority_effect = {
			CULTURE = culture:radhanite
			SIZE = large
			COUNTY = title:c_samarra
		}

		# Persia

		if = {
			limit = { game_start_date <= 1060.1.1 }

			add_faith_minority_effect = {
				FAITH = faith:mazdayasna
				SIZE = large
				COUNTY = title:c_yazd
			}
		}

		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = large
			COUNTY = title:c_isfahan
		}
		add_culture_minority_effect = {
			CULTURE = culture:radhanite
			SIZE = large
			COUNTY = title:c_isfahan
		}


		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_herat
		}
		add_culture_minority_effect = {
			CULTURE = culture:radhanite
			SIZE = small
			COUNTY = title:c_herat
		}


		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_kabul
		}
		add_culture_minority_effect = {
			CULTURE = culture:radhanite
			SIZE = small
			COUNTY = title:c_kabul
		}



		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = large
			COUNTY = title:c_veneto
		}
		add_faith_minority_effect = {
			FAITH = faith:samaritan
			SIZE = small
			COUNTY = title:c_veneto
		}
		add_culture_minority_effect = {
			CULTURE = culture:radhanite
			SIZE = small
			COUNTY = title:c_veneto
		}
		add_culture_minority_effect = {
			CULTURE = culture:sephardi
			SIZE = small
			COUNTY = title:c_veneto
		}
		add_culture_minority_effect = {
			CULTURE = culture:ashkenazi
			SIZE = small
			COUNTY = title:c_veneto
		}
		add_faith_minority_effect = {
			FAITH = faith:ashari
			SIZE = small
			COUNTY = title:c_veneto
		}
		add_faith_minority_effect = {
			FAITH = faith:orthodox
			SIZE = large
			COUNTY = title:c_veneto
		}


		add_faith_minority_effect = {
			FAITH = faith:haymanot
			SIZE = large
			COUNTY = title:c_lasta
		}


		# Parsees

        if = {
            limit = { game_start_date <= 1066.1.1 }

			add_faith_minority_effect = {
				FAITH = faith:zurvanism
				SIZE = large
				COUNTY = title:c_daman
			}
			add_culture_minority_effect = {
				CULTURE = culture:persian
				SIZE = large
				COUNTY = title:c_daman
			}
		}

		# Roma

        if = {
            limit = {
            	# game_start_date >= 800.1.1
            	game_start_date <= 900.1.1
            }

            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_panjgur
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_kiz
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_turan
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_bhakkar
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_ranikot
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_siwistan
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_aror
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_vijnot
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_rajanpur
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_uch
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_multan
			}
        }
        else_if = {
            limit = {
            	game_start_date >= 900.1.1
            	game_start_date <= 1000.1.1
            }

            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_bailaqan
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_maragha
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_dinawar
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_hamadan
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_nihawand
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_qom
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_ardestan
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_isfahan
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_luristan
			}
        }
        else_if = {
            limit = {
            	game_start_date >= 1000.1.1
            	# game_start_date <= 1100.1.1
            }

            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_cerasus
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_colonea
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_trebizond
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_acampse
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_theodosiopolis
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_tao
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_turuberan
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_bagrewand
			}
            add_culture_minority_effect = {
				CULTURE = culture:romani
				SIZE = small
				COUNTY = title:c_apahunik
			}
        }


		## India and it's religious diversity
		#========================
		every_county = {
			limit = {
				title_province = { geographical_region = world_india }
				faith = {
					has_doctrine = eastern_hostility_doctrine
					NOT = { has_doctrine = tenet_communal_identity }
				}
			}
			this = { save_temporary_scope_as = the_county_temp }
			every_neighboring_county = {
				if = {
					limit = {
						faith = {
							has_doctrine = eastern_hostility_doctrine
							NOT = { has_doctrine = tenet_communal_identity }
							NOT = { this = scope:the_county_temp.faith }
						}
					}
					faith = { add_to_list = neighboring_faiths }
				}
			}
			every_in_list = {
				list = neighboring_faiths
				this = { save_temporary_scope_as = the_faith_temp }
				scope:the_county_temp = {
					add_to_variable_list = {
						name = faith_minorities_small
						target = scope:the_faith_temp
					}
				}
				this = { remove_from_list = neighboring_faiths }
			}
			scope:the_county_temp.holder.faith = {
				if = {
					limit = {
						has_doctrine = eastern_hostility_doctrine
						NOT = { has_doctrine = tenet_communal_identity }
						NOT = { this = scope:the_county_temp.faith }
					}
					add_to_variable_list = {
						name = faith_minorities_small
						target = scope:the_faith_temp
					}
				}
			}
		}

		### ROA ###

		if = {
            limit = { game_start_date >= 1050.1.1 }

			add_culture_minority_effect = {
				CULTURE = culture:sheren
				SIZE = large
				COUNTY = title:c_qianzhou_jiangxi_china
			}
		}


		add_faith_minority_effect = {
			FAITH = faith:manichean
			SIZE = small
			COUNTY = title:c_lanzhou_longxi_china
		}
		add_faith_minority_effect = {
			FAITH = faith:ashari
			SIZE = small
			COUNTY = title:c_lanzhou_longxi_china
		}
		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_lanzhou_longxi_china
		}


		add_faith_minority_effect = {
			FAITH = faith:manichean
			SIZE = small
			COUNTY = title:c_changan_china
		}
		add_faith_minority_effect = {
			FAITH = faith:ashari
			SIZE = small
			COUNTY = title:c_changan_china
		}


		add_faith_minority_effect = {
			FAITH = faith:ashari
			SIZE = small
			COUNTY = title:c_nanhai_china
		}
		add_faith_minority_effect = {
			FAITH = faith:rabbinism
			SIZE = small
			COUNTY = title:c_nanhai_china
		}
		add_faith_minority_effect = {
			FAITH = faith:nestorian
			SIZE = small
			COUNTY = title:c_nanhai_china
		}
		add_faith_minority_effect = {
			FAITH = faith:mazdayasna
			SIZE = small
			COUNTY = title:c_nanhai_china
		}


		add_faith_minority_effect = {
			FAITH = faith:ashari
			SIZE = small
			COUNTY = title:c_pasai
		}


		add_faith_minority_effect = {
			FAITH = faith:ashari
			SIZE = small
			COUNTY = title:c_lamuri
		}

        if = {
            limit = { game_start_date >= 986.1.1 }

			add_culture_minority_effect = {
				CULTURE = culture:cham
				SIZE = small
				COUNTY = title:c_zhenzhou_zhuyajun_china
			}
			add_faith_minority_effect = {
				FAITH = faith:chamic_shaivism
				SIZE = small
				COUNTY = title:c_zhenzhou_zhuyajun_china
			}
		}

		if = {
			limit = {
				game_start_date >= 1030.1.1
				game_start_date <= 1066.12.31
			}

			add_culture_minority_effect = {
				CULTURE = culture:tamil
				SIZE = small
				COUNTY = title:c_lamuri
			}
			add_faith_minority_effect = {
				FAITH = faith:shaivism
				SIZE = small
				COUNTY = title:c_lamuri
			}

			add_culture_minority_effect = {
				CULTURE = culture:tamil
				SIZE = small
				COUNTY = title:c_pasai
			}
			add_faith_minority_effect = {
				FAITH = faith:shaivism
				SIZE = small
				COUNTY = title:c_pasai
			}

			add_culture_minority_effect = {
				CULTURE = culture:tamil
				SIZE = small
				COUNTY = title:c_perlak
			}
			add_faith_minority_effect = {
				FAITH = faith:shaivism
				SIZE = small
				COUNTY = title:c_perlak
			}

			add_culture_minority_effect = {
				CULTURE = culture:tamil
				SIZE = small
				COUNTY = title:c_siak
			}
			add_faith_minority_effect = {
				FAITH = faith:shaivism
				SIZE = small
				COUNTY = title:c_siak
			}

			add_culture_minority_effect = {
				CULTURE = culture:tamil
				SIZE = small
				COUNTY = title:c_palembang
			}
			add_faith_minority_effect = {
				FAITH = faith:shaivism
				SIZE = small
				COUNTY = title:c_palembang
			}

			add_culture_minority_effect = {
				CULTURE = culture:tamil
				SIZE = large
				COUNTY = title:c_barus
			}
			add_faith_minority_effect = {
				FAITH = faith:shaivism
				SIZE = large
				COUNTY = title:c_barus
			}
		}

		title:k_chenla = {
			every_de_jure_county = {
				limit = {
					culture = culture:khmer
				}

				add_faith_minority_effect = {
					FAITH = faith:theravada
					SIZE = small
					COUNTY = this
				}
				add_faith_minority_effect = {
					FAITH = faith:mahayana
					SIZE = large
					COUNTY = this
				}
			}
		}

		# Goryeo
        if = {
            limit = {
            	game_start_date = 936.1.1
            }

			add_culture_minority_effect = {
				CULTURE = culture:balhae
				SIZE = large
				COUNTY = title:c_kaeseong
			}
			add_culture_minority_effect = {
				CULTURE = culture:goguryeo
				SIZE = large
				COUNTY = title:c_kaeseong
			}

			add_culture_minority_effect = {
				CULTURE = culture:balhae
				SIZE = large
				COUNTY = title:c_pyongyang
			}
			add_culture_minority_effect = {
				CULTURE = culture:goguryeo
				SIZE = large
				COUNTY = title:c_pyongyang
			}

			add_culture_minority_effect = {
				CULTURE = culture:balhae
				SIZE = large
				COUNTY = title:c_seohae
			}
			add_culture_minority_effect = {
				CULTURE = culture:goguryeo
				SIZE = large
				COUNTY = title:c_seohae
			}
        }
	}
}

initial_spawn_minority_courtiers = {
	effect = {
		every_ruler = { trigger_event = { on_action = spawn_minority_characters } }
	}
}
