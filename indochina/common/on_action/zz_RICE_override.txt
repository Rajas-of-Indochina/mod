yearly_global_pulse = {
	on_actions = {
		create_north_american_minorities_pulse
		rice_silk_road_migration_pulse
	}
}

# Not actually an override but still putting it here because it's RICE-related
create_north_american_minorities_pulse = {
	trigger = {
		has_global_variable = RICE_greenland_ending_integration
	}
	effect = {
		random_culture_global = {
			limit = {
				OR = {
					this = culture:icelandic
					has_cultural_pillar = heritage_inuit
					has_cultural_pillar = heritage_paleo_inuit
					has_cultural_pillar = heritage_iroquoian
					has_cultural_pillar = heritage_algonquian
					trigger_if = {
						limit = { exists = character:RICE_greenlandic_deity_0001 }
						this = character:RICE_greenlandic_deity_0001.culture
					}
					trigger_if = {
						limit = { exists = character:RICE_greenlandic_deity_0002 }
						this = character:RICE_greenlandic_deity_0002.culture
					}					
				}
			}
			save_scope_as = north_atlantic_culture
		}
		random_religion_global = {
			limit = {
				OR = {
					this = religion:algonquian_religion
					this = religion:inuit_religion
					this = religion:iroquoian_religion
				}			
			}
			random_faith = {
				save_scope_as = north_atlantic_faith
			}
		}
		random_county_in_region = {
			region = RICE_greenland_struggle_region
			save_scope_as = county
			random_list = {
				5 = {
					promote_culture_minority_effect = { CULTURE = scope:north_atlantic_culture }
					holder = {
						send_interface_message = {
							title = north_atlantic_minority_culture
							custom_tooltip = north_atlantic_minority_culture_desc
							right_icon = scope:county
						}
					}
				}
				5 = {
					promote_faith_minority_effect = { FAITH = scope:north_atlantic_faith }
					holder = {
						send_interface_message = {
							title = north_atlantic_minority_faith
							custom_tooltip = north_atlantic_minority_faith_desc
							right_icon = scope:county
						}
					}
				}
				5 = {
					promote_culture_minority_effect = { CULTURE = scope:north_atlantic_culture }
					promote_faith_minority_effect = { FAITH = scope:north_atlantic_faith }
					holder = {
						send_interface_message = {
							title = north_atlantic_minority_culture_faith
							custom_tooltip = north_atlantic_minority_culture_faith_desc
							right_icon = scope:county
						}
					}
				}
				85 = {}
			}
		}
	}
}

rice_silk_road_migration_pulse = {
	effect = {
		# Pick first region
		random_list = {
			10 = {
				set_variable = { name = from_region value = flag:steppe }
				random_county_in_region = {
					region = RICE_silk_road_steppe
					save_scope_as = source_county
					weight = {
						value  = development_level
					}
				}
			}
			10 = {
				set_variable = { name = from_region value = flag:india }
				random_county_in_region = {
					region = RICE_silk_road_india
					save_scope_as = source_county
					weight = {
						value = development_level
					}
				}
			}
			10 = {
				set_variable = { name = from_region value = flag:himalayas }
				random_county_in_region = {
					region = RICE_silk_road_himalayas
					save_scope_as = source_county
					weight = {
						value = development_level
					}
				}
			}
			10 = {
				set_variable = { name = from_region value = flag:middle_east }
				random_county_in_region = {
					region = RICE_silk_road_middle_east
					save_scope_as = source_county
					weight = {
						value = development_level
					}
				}
			}
			10 = {
				set_variable = { name = from_region value = flag:east_asia }
				random_county_in_region = {
					region = world_china
					save_scope_as = source_county
					weight = {
						value = development_level
					}
				}
			}
		}
		# Pick second region
		random_list = {
			10 = {
				trigger = { NOT = { var:name = from_region value = flag:steppe } }
				random_county_in_region = {
					region = RICE_silk_road_steppe
					save_scope_as = county
					non_neighbor_migration_effect = yes
					weight = {
						value = 100
						subtract = development_level
						multiply = {
							value = 2
							holder = {
								has_modifier = RICE_tarim_basin_steppe_contacts
							}
						}
					}
				}
			}
			10 = {
				trigger = { NOT = { var:from_region = flag:india } }
				random_county_in_region = {
					region = RICE_silk_road_india
					save_scope_as = county
					non_neighbor_migration_effect = yes
					weight = {
						value = 100
						subtract = development_level
						multiply = {
							value = 2
							holder = {
								has_modifier = RICE_tarim_basin_indian_contacts
							}
						}
					}
				}
			}
			10 = {
				trigger = { NOT = { var:from_region = flag:himalayas } }
				random_county_in_region = {
					region = RICE_silk_road_himalayas
					save_scope_as = county
					non_neighbor_migration_effect = yes
					weight = {
						value = 100
						subtract = development_level
						multiply = {
							value = 2
							holder = {
								has_modifier = RICE_tarim_basin_himalayan_contacts
							}
						}
					}
				}
			}
			10 = {
				trigger = { NOT = { var:from_region = flag:middle_east } }
				random_county_in_region = {
					region = RICE_silk_road_middle_east
					save_scope_as = county
					non_neighbor_migration_effect = yes
					weight = {
						value = 100
						subtract = development_level
						multiply = {
							value = 2
							holder = {
								has_modifier = RICE_tarim_basin_middle_eastern_contacts
							}
						}
					}
				}
			}
			10 = {
				trigger = { NOT = { var:from_region = flag:east_asia } }
				random_county_in_region = {
					region = world_china
					save_scope_as = county
					non_neighbor_migration_effect = yes
					weight = {
						value = 100
						subtract = development_level
						multiply = {
							value = 2
							holder = {
								has_modifier = RICE_tarim_basin_east_asian_contacts
							}
						}
					}
				}
			}
		}
	}
}