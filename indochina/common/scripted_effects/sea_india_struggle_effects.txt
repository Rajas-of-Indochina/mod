assign_dominance_effect = {
	if = {
		limit = {
			AND = {
				struggle_india_hindu_score >= struggle_india_buddhist_score
				struggle_india_hindu_score >= struggle_india_jainist_score
				struggle_india_hindu_score >= struggle_india_muslim_score
				struggle_india_hindu_score >= struggle_india_indian_pagan_score
				struggle_india_hindu_score >= struggle_india_foreign_score
			}
		}
		set_global_variable = {
			name = dominant_faction
			value = flag:hindu_dominance
		}
	}
	else_if = {
		limit = {
			AND = {
				struggle_india_buddhist_score >= struggle_india_hindu_score
				struggle_india_buddhist_score >= struggle_india_jainist_score
				struggle_india_buddhist_score >= struggle_india_muslim_score
				struggle_india_buddhist_score >= struggle_india_indian_pagan_score
				struggle_india_buddhist_score >= struggle_india_foreign_score
			}
		}
		set_global_variable = {
			name = dominant_faction
			value = flag:buddhist_dominance
		}
	}
	else_if = {
		limit = {
			AND = {
				struggle_india_jainist_score >= struggle_india_hindu_score
				struggle_india_jainist_score >= struggle_india_buddhist_score
				struggle_india_jainist_score >= struggle_india_muslim_score
				struggle_india_jainist_score >= struggle_india_indian_pagan_score
				struggle_india_jainist_score >= struggle_india_foreign_score
			}
		}
		set_global_variable = {
			name = dominant_faction
			value = flag:jainist_dominance
		}
	}
	else_if = {
		limit = {
			AND = {
				struggle_india_muslim_score >= struggle_india_hindu_score
				struggle_india_muslim_score >= struggle_india_buddhist_score
				struggle_india_muslim_score >= struggle_india_jainist_score
				struggle_india_muslim_score >= struggle_india_indian_pagan_score
				struggle_india_muslim_score >= struggle_india_foreign_score
			}
		}
		set_global_variable = {
			name = dominant_faction
			value = flag:muslim_dominance
		}
	}
	else_if = {
		limit = {
			AND = {
				struggle_india_indian_pagan_score >= struggle_india_hindu_score
				struggle_india_indian_pagan_score >= struggle_india_buddhist_score
				struggle_india_indian_pagan_score >= struggle_india_jainist_score
				struggle_india_indian_pagan_score >= struggle_india_muslim_score
				struggle_india_indian_pagan_score >= struggle_india_foreign_score
			}
		}
		set_global_variable = {
			name = dominant_faction
			value = flag:indian_pagan_dominance
		}
	}
	else = {
		set_global_variable = {
			name = dominant_faction
			value = flag:foreign_dominance
		}
	}
}

# Override vanilla
unite_india_decision_effect = {
	if = {
		limit = { has_title = title:e_indo_greek_kingdom } # If you're the new Menander then things get moved under Yavanarajya
		title:e_indo_greek_kingdom = { save_scope_as = indian_empire_liege }
	}
	else = {
		#Create the title and make it primary
		create_title_and_vassal_change = {
			type = created
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		title:e_india = {
			change_title_holder = {
				holder = root
				change = scope:title_change
			}
		}
		resolve_title_and_vassal_change = scope:title_change
		set_primary_title_to = title:e_india
		title:e_india = { save_scope_as = indian_empire_liege }
	}

	title:e_rajastan = { add_to_list = indian_empire }
	title:e_deccan = { add_to_list = indian_empire }
	title:e_bengal = { add_to_list = indian_empire }

	every_in_list = {
		list = indian_empire
		every_in_de_jure_hierarchy = {
			limit = {
				tier = tier_kingdom
			}
			set_de_jure_liege_title = scope:indian_empire_liege
		}
	}

	hidden_effect = {
		if = {
			limit = { has_title = title:e_rajastan }
			destroy_title = title:e_rajastan
		}
		if = {
			limit = { has_title = title:e_deccan }
			destroy_title = title:e_deccan
		}
		if = {
			limit = { has_title = title:e_bengal }
			destroy_title = title:e_bengal
		}
	}
}

unite_nasrani_decision_effect = {
	add_prestige = major_prestige_gain
	add_piety = major_piety_gain
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:k_nasrani = {
		change_title_holder = {
			holder = scope:founder
			change = scope:title_change
		}
	}
	resolve_title_and_vassal_change = scope:title_change

	title:d_chera_nadu = { set_de_jure_liege_title = title:k_nasrani }
	title:d_konkana = { set_de_jure_liege_title = title:k_nasrani }
	if = {
		limit = {
			title:d_sinhala = { holder = root }
		}
		title:d_sinhala = { set_de_jure_liege_title = title:k_nasrani }
	}
	if = {
		limit = {
			title:d_pandya_nadu = { holder = root }
		}
		title:d_pandya_nadu = { set_de_jure_liege_title = title:k_nasrani }
	}
	every_held_title = {
		limit = {
			tier = tier_barony
			is_holy_site_of = faith:indian_catholic
		}
		county = { set_county_faith = faith:indian_catholic }
	}
	every_realm_county = {
		limit = {
			NOT = {
				any_in_de_jure_hierarchy = { is_holy_site_of = faith:indian_catholic }
			}
		}
		save_scope_as = scope:county
		promote_faith_minority_effect = { FAITH = faith:indian_catholic }
	}
}

unite_bene_israel_effect = {
	add_prestige = major_prestige_gain
	add_piety = major_piety_gain
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:k_bene_israel = {
		change_title_holder = {
			holder = scope:founder
			change = scope:title_change
		}
	}
	resolve_title_and_vassal_change = scope:title_change

	title:d_chera_nadu = { set_de_jure_liege_title = title:k_bene_israel }
	title:d_konkana = { set_de_jure_liege_title = title:k_bene_israel }
	if = {
		limit = {
			title:d_lata = { holder = root }
		}
		title:d_lata = { set_de_jure_liege_title = title:k_bene_israel }
	}
	if = {
		limit = {
			title:d_nasikya = { holder = root }
		}
		title:d_nasikya = { set_de_jure_liege_title = title:k_bene_israel }
	}
	random_held_title = {
		limit = {
			tier = tier_barony
			is_holy_site_of = faith:malabarism
		}
		county = { set_county_culture = culture:kochinim }
		county = { set_county_faith = faith:malabarism }
	}
	every_realm_county = {
		limit = {
			NOT = {
				any_in_de_jure_hierarchy = { is_holy_site_of = faith:malabarism }
			}
		}
		save_scope_as = scope:county
		promote_faith_minority_effect = { FAITH = faith:malabarism }
		promote_culture_minority_effect = { CULTURE = culture:kochinim }
	}
}