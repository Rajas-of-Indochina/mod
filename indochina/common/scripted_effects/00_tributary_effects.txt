
# Params
# $SUZERAIN$
#   Character
#   The character to receive tribute
# $TRIBUTARY$
#   Character
#   The character to be paying tribute
# $TYPE$
#   TributaryType (name of scripted effect)
#   The type of tributary being created
make_tributary = {
    if = {
        limit = {
            $TRIBUTARY$ = {
                is_alive = yes
                is_independent_ruler = yes
                highest_held_title_tier >= tier_county
            }
            $SUZERAIN$ = {
                is_alive = yes
                highest_held_title_tier >= tier_county
            }
        }
        $TRIBUTARY$ = {
            add_relation_suzerain = $SUZERAIN$
        }
    }
}

# THIS is the tributary
free_tributary_effect = {
    custom_tooltip = {
        text = free_tributary_effect_tt
        every_relation = { type = suzerain
            remove_relation_tributary = prev
        }
    }
}

remove_tributaries_from_suzerain_effect = {
    every_relation = { type = suzerain
        remove_relation_tributary = prev
    }
}

remove_suzerain_from_tributary_effect = {
    every_relation = { type = tributary
        remove_relation_suzerain = prev
    }
}

## PARAMS
# TRIBUTARY
##
pass_tributary_type_to_heir = {
    $TRIBUTARY$ = {
        every_relation = {
            type = suzerain
            remove_relation_tributary = $TRIBUTARY$
            add_relation_tributary = $TRIBUTARY$.primary_heir
        }
    }
}

## PARAMS
# SUZERAIN
##
pass_suzerainship_to_heir = {
    $SUZERAIN$ = {
        every_relation = {
            type = tributary
            remove_relation_suzerain = $SUZERAIN$
            add_relation_suzerain = $SUZERAIN$.primary_heir
        }
    }
}

# demand_tribute_from_recipient_effect = {
#     scope:actor = {
#         if = {
#             limit = {
#                 scope:permanent_trib = yes
#             }
#             make_tributary = {
#                 TYPE = tributary_permanent
#                 TRIBUTARY = scope:recipient
#                 SUZERAIN = scope:actor
#             }
#         }
#     }
# }

# offer_tribute_effect = {
#     #create_title_and_vassal_change = {
#     #   type = swear_fealty
#     #   save_scope_as = change
#     #}
#     #scope:recipient = {
#     #       change_liege = {
#     #       liege = scope:actor
#     #       change = scope:change
#     #   }
#     #}
#     #resolve_title_and_vassal_change = scope:change
#     scope:recipient = {
#         if = {
#             limit = {
#                 scope:permanent_trib = yes
#             }
#             make_tributary = {
#                 TYPE = tributary_permanent
#                 TRIBUTARY = scope:actor
#                 SUZERAIN = scope:recipient
#             }
#         }
#     }
# }
