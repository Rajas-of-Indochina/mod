zakah_dev_realm = {
	scope = character

	effect = {
		change_variable = {
			name = zakah_balance
			subtract = 500
		}

		set_variable = {
			name = dev_zakah_tmp_count
			value = 50
		}
		change_variable = {
			name = dev_zakah_tmp_count
			divide = realm_size
		}
		every_realm_county = {
			change_development_level = root.var:dev_zakah_tmp_count
		}
	}
}

zakah_opinion_realm = {
	scope = character

	effect = {
		change_variable = {
			name = zakah_balance
			subtract = 200
		}

		hidden_effect = {
			every_realm_county = {
				add_county_modifier = {
					modifier = opinion_zakah
					years = 10
				}
			}
		}
	}
}

zakah_dev_all = {
	scope = character

	effect = {
		change_variable = {
			name = zakah_balance
			subtract = 1500
		}

		set_variable = {
			name = dev_zakah_tmp_count
			value = 75
		}
		set_variable = {
			name = faith_counties
			value = 0
		}
		hidden_effect = {
			every_county = {
				limit = {
					faith = root.faith
				}
				root = {
					change_variable = {
						name = faith_counties
						add = 1
					}
				}
			}
			change_variable = {
				name = dev_zakah_tmp_count
				divide = var:faith_counties
			}
			every_county = {
				limit = {
					faith = root.faith
				}
				change_development_level = root.var:dev_zakah_tmp_count
			}
		}
	}
}

zakah_modifier_supply = {
	scope = character

	effect = {
		change_variable = {
			name = zakah_balance
			subtract = 1500
		}

		hidden_effect = {
			every_realm_province = {
				add_province_modifier = {
					modifier = zakah_modifier_supply
					years = 10
				}
			}
		}
	}
}

zakah_modifier_dev = {
	scope = character

	effect = {
		change_variable = {
			name = zakah_balance
			subtract = 1500
		}

		hidden_effect = {
			every_realm_county = {
				add_county_modifier = {
					modifier = opinion_zakah
					years = 50
				}
			}
		}
	}
}

update_malayan_sultanate_faiths_list = {
	scope = character
	effect = {
		clear_variable_list = islam_options
		every_realm_county = {
			limit = {
				OR = {
					religion = religion:islam_religion
					any_in_list = {
						variable = faith_minorities_large
						religion = religion:islam_religion
					}
				}
			}
			faith = {
				ROOT = {
					if = {
						limit = {
							NOT = {
								is_target_in_variable_list = {
									name = islam_options
									target = PREV
								}
							}
						}
					}
					add_to_variable_list = {
						name = islam_options
						target = PREV
					}
				}
			}
			every_in_list = {
				variable = faith_minorities_large
				limit = {
					ROOT = {
						NOT = {
							is_target_in_variable_list = {
								name = islam_options
								target = PREV
							}
						}
					}
					religion = religion:islam
				}
				ROOT = {
					add_to_variable_list = {
						name = islam_options
						target = PREV
					}
				}
			}
		}
	}
}