namespace = caucasianroa

caucasianroa.001 = {
	type = character_event
	title = caucasianroa.001.t
	desc = caucasianroa.001_desc

	theme = learning_theology_focus
	right_portrait = {
		character =  title:k_papal_state.holder
		animation = idle
	}
	left_portrait = {
		character =  title:k_orthodox.holder
		animation = idle
	}

	lower_right_portrait = {
		character =  title:d_apostolic_church.holder
		animation = idle
	}

	lower_left_portrait = {
		character =  title:d_patriarchate_in_the_east.holder
		animation = idle
	}

	option = {
		name = caucasianroa.001.a
		set_character_faith_with_conversion = faith:catholic
	}
	option = {
		name = caucasianroa.001.b
		set_character_faith_with_conversion = faith:orthodox
	}
	option = {
		name = caucasianroa.001.c
		set_character_faith_with_conversion = faith:armenian_apostolic
	}
	option = {
		name = caucasianroa.001.d
		set_character_faith_with_conversion = faith:nestorian
	}
	option = {
		name = caucasianroa.001.e
	}
}

caucasianroa.002 = {
	type = character_event
	title = caucasianroa.002.t
	desc = caucasianroa.002_desc

	theme = stewardship_wealth_focus
	right_portrait = {
		character =  root
		animation = steward
	}

	option = {
		name = caucasianroa.002.a
        add_gold = 800
		add_prestige = 500
				capital_county = {
					save_scope_as = county
					change_development_level = 1
					add_culture_minority_effect = {
						CULTURE = culture:cherkesogai
						SIZE = small
						COUNTY = scope:county
					}
					add_faith_minority_effect = {
						FAITH = faith:armenian_apostolic
						SIZE = small
						COUNTY = scope:county
					}
				}

				random_held_county = {
					save_scope_as = county
					change_development_level = 1
					add_culture_minority_effect = {
						CULTURE = culture:cherkesogai
						SIZE = small
						COUNTY = scope:county
					}
					add_faith_minority_effect = {
						FAITH = faith:armenian_apostolic
						SIZE = small
						COUNTY = scope:county
					}
				}
	}
}

caucasianroa.003 = {
	type = character_event
	title = caucasianroa.003.t
	desc = caucasianroa.003_desc

    immediate = {
			create_character = {
				age = { 74 }
				location = root.capital_province
				gender = male
				name = "Abu Ishaq"
				culture = culture:levantine
				faith = faith:ashari
				trait = brave
				trait = zealous
				trait = diligent
				trait = intellect_good_1
				trait = education_learning_3
				learning = { 5 10 }

				dynasty = none
				after_creation = {
					add_gold = { minor_gold_value medium_gold_value }
					add_prestige = { minor_prestige_gain medium_prestige_gain }
					add_piety = { minor_piety_gain medium_piety_gain }
				}

				save_scope_as = abu_ishaq
			}

			create_character = {
				age = { 76 }
				location = root.capital_province
				gender = male
				name = "Muhammad Kindi"
				culture = culture:levantine
				faith = faith:ashari
				trait = honest
				trait = zealous
				trait = diligent
				trait = intellect_good_1
				trait = education_learning_3
				learning = { 5 10 }

				dynasty = none
				after_creation = {
					add_gold = { minor_gold_value medium_gold_value }
					add_prestige = { minor_prestige_gain medium_prestige_gain }
					add_piety = { minor_piety_gain medium_piety_gain }
				}

				save_scope_as = muhammad_kindi
			}
		cp:councillor_court_chaplain = { save_scope_as = chaplain }
	}

	theme = realm
	right_portrait = {
		character =  scope:abu_ishaq
		animation = personality_zealous
	}
	left_portrait = {
		character =  scope:muhammad_kindi
		animation = chaplain
	}


	option = {
		name = caucasianroa.003.a
			trigger_event = {	id = caucasianroa.004 }

	}
	option = {
		name = caucasianroa.003.b
		add_piety = 100
		add_gold = 100
	}
}


caucasianroa.004 = {
	type = character_event
	title = caucasianroa.004.t
	desc = caucasianroa.004_desc


	theme = realm
	right_portrait = {
		character =  scope:abu_ishaq
		animation = personality_zealous
	}
	left_portrait = {
		character =  scope:muhammad_kindi
		animation = chaplain
	}

	option = {
		name = caucasianroa.004.a
		random_held_county = {
			save_scope_as = county1
			change_development_level = 1
			add_faith_minority_effect = {
				FAITH = faith:ashari
				SIZE = small
				COUNTY = scope:county1
			}
		}
		add_piety = -100
	}
	option = {
		name = caucasianroa.004.b
		add_piety = 100
		add_prestige = 100
	}
	option = {
		name = caucasianroa.003.b
		add_piety = 50
		add_gold = 100
	}
}

caucasianroa.005 = {
	type = character_event
	title = caucasianroa.005.t
	desc = caucasianroa.005_desc

	theme = realm
	left_portrait = {
		character = root
		animation = celebrate_sword
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
		unite_circassia_decision_effect = yes
		save_scope_as = scoped_unifier
	}

	option = {
		name = caucasianroa.005.a
		add_trait = thamade
		add_trait = achebeg
		add_prestige = 2000
		add_dynasty_prestige = 500
		add_piety = 500
		add_martial_skill = 1
		add_diplomacy_skill = 1
		add_prestige_level = 1
		every_ruler = {
			limit = {
				NOT = { this = scoped_unifier }
				is_within_diplo_range = { CHARACTER = scoped_unifier }
			}
			trigger_event = caucasianroa.007
		}
				capital_county = {
					change_development_level = 1
				}
		hidden_effect = {
			save_scope_as = achebeg_progenitor
			every_child = {
				even_if_dead = yes
				trigger_event = hidden_achebeg_event

				every_child = {
					even_if_dead = yes
					limit = {
						OR = {
							is_grandchild_of = scope:achebeg_progenitor
							is_great_grandchild_of = scope:achebeg_progenitor
						}
					}
					trigger_event = hidden_achebeg_event

					every_child = {
						even_if_dead = yes
						limit = {
							OR = {
								is_grandchild_of = scope:achebeg_progenitor
								is_great_grandchild_of = scope:achebeg_progenitor
							}
						}
						trigger_event = hidden_achebeg_event
					}
				}
			}
		}
	}	

}

hidden_achebeg_event = {
    type = character_event
    hidden = yes

    trigger = {
                exists = father
                father = {
                    OR = {
                        has_trait = achebeg
                        has_trait = achebeg_descendant
                    }
                }
        NOR = {
            has_trait = achebeg # Just in case the tree was horribly tangled...
            has_trait = achebeg_descendant
        }
    }

    immediate = {
        add_trait = achebeg_descendant
        every_child = {
            trigger_event = hidden_achebeg_event
        }
    }
}

# Notification of cultural name change

caucasianroa.006 = {
	type = character_event
	theme = culture_change
	title = caucasianroa.006.t
	desc = caucasianroa.006.desc

	left_portrait = {
		character = culture:udi.culture_head
		animation = personality_content
	}

	immediate = {
		custom_tooltip = udi_name_change_tt
	}
	
	option = {
		#Okay whatever
		name = caucasianroa.006.whatever
	}

}

caucasianroa.007 = {
	type = character_event
	title = caucasianroa.007.t
	desc = caucasianroa.007.desc
	theme = realm
	left_portrait = {
		character =  scoped_unifier
		animation = personality_honorable
	}

	immediate = {
		#Same-faith non-empire tier rulers are over-awed.
		if = {
			limit = { faith = scoped_unifier.faith }
			play_music_cue = "mx_cue_epic_sacral_moment"
		}
		#Otherwise, this is a tacit statement of imperial threat.
		else = { play_music_cue = "mx_cue_combat_2" }
	}
	option = {
		name = caucasianroa.007.ok
	}
}