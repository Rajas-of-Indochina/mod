namespace = ub_major_decision

ub_major_decision.0001 = {
	type = character_event
	title = ub_major_decision.0001.t
	desc = {
		desc = ub_major_decision.0001.desc_first
		first_valid = {
			triggered_desc = {
				trigger = {
					calc_true_if = {
						amount >= 2
						any_sub_realm_barony = { this = title:b_qus }
						any_sub_realm_barony = { this = title:b_iraklio }
						any_sub_realm_barony = { this = title:b_al-akhadid }
						any_sub_realm_barony = { this = title:b_labda }
						any_sub_realm_barony = { this = title:b_samos }
						any_sub_realm_barony = { this = title:b_ephesos }
						any_sub_realm_barony = { this = title:b_andravida }
						any_sub_realm_barony = { this = title:b_olbia_ETEL }
						any_sub_realm_barony = { this = title:b_tinos }
						any_sub_realm_barony = { this = title:b_bayhan }
						any_sub_realm_barony = { this = title:b_dhufar }
						any_sub_realm_barony = { this = title:b_kharga }
						any_sub_realm_barony = { this = title:b_al-qasrayn }
					}
				}
				desc = ub_major_decision.0001.desc_more
			}
			desc = ub_major_decision.0001.desc
		}
	}
	theme = learning
	left_portrait = {
		character = scope:founder
		animation = personality_rational
	}

	immediate = {
		excavate_ruins_decision_event_effect = yes
		ub_excavate_ruin_effect = yes
	}

	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_al-akhadid }
			title:b_al-akhadid = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_ur_ziggurat_01
					}
				}
			}
		}
		title:b_al-akhadid.title_province = {
			add_special_building = ub_ur_ziggurat_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_al-akhadid = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_al-akhadid
	}

	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_iraklio }
			title:b_iraklio = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_knossos_01
					}
				}
			}
		}
		title:b_iraklio.title_province = {
			add_special_building = ub_knossos_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_iraklio = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_iraklio
	}

	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_qus }
			title:b_qus = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_valley_kings_01
					}
				}
			}
		}
		title:b_qus.title_province = {
			add_building = ub_valley_kings_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_qus = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_qus
	}
	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_labda }
			title:b_labda = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_leptis_magna_01
					}
				}
			}
		}
		title:b_labda.title_province = {
			add_special_building = ub_leptis_magna_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_labda = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_labda
	}
	
	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_samos }
			title:b_samos = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_heraion_samos_01
					}
				}
			}
		}
		title:b_samos.title_province = {
			add_special_building = ub_heraion_samos_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_samos = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_samos
	}
	
	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_ephesos }
			title:b_ephesos = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_temple_artemis_01
					}
				}
			}
		}
		title:b_ephesos.title_province = {
			add_special_building = ub_temple_artemis_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_ephesos = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_ephesos
	}

	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_andravida }
			title:b_andravida = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_temple_olympia_01
					}
				}
			}
		}
		title:b_andravida.title_province = {
			add_special_building = ub_temple_olympia_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_andravida = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_andravida
	}

	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_olbia_ETEL }
			title:b_olbia_ETEL = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_ancient_olbia_01
					}
				}
			}
		}
		title:b_olbia_ETEL.title_province = {
			add_special_building = ub_ancient_olbia_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_olbia_ETEL = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_olbia_ETEL
	}
	
	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_tinos }
			title:b_tinos = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_temple_delians_01
					}
				}
			}
		}
		title:b_tinos.title_province = {
			add_special_building = ub_temple_delians_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_tinos = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_tinos
	}

	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_bayhan }
			title:b_bayhan = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_marib_dam_01
					}
				}
			}
		}
		title:b_bayhan.title_province = {
			add_special_building = ub_marib_dam_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_bayhan = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_bayhan
	}

	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_dhufar }
			title:b_dhufar = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_khor_rori_01
					}
				}
			}
		}
		title:b_dhufar.title_province = {
			add_special_building = ub_khor_rori_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_dhufar = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_dhufar
	}

	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_kharga }
			title:b_kharga = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_temple_hibis_01
					}
				}
			}
		}
		title:b_kharga.title_province = {
			add_special_building = ub_temple_hibis_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_kharga = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_kharga
	}
	
	option = {
		trigger = {
			any_sub_realm_barony = { this = title:b_al-qasrayn }
			title:b_al-qasrayn = {
				county = { development_level >= medium_development_level }
				NOT = { 
					title_province = {
						has_building_or_higher = ub_ruin_sbeitia_01
					}
				}
			}
		}
		title:b_al-qasrayn.title_province = {
			add_special_building = ub_ruin_sbeitia_01
			set_variable = { #To unlock the building
				name = excavation
				value = yes
			}
			title:b_al-qasrayn = {
				if = {
					limit = { NOT = { holder = root } }
					holder = {
						add_opinion = {
							target = root
							modifier = pleased_opinion
							opinion = 30
						}
					}
				}
			}
		}
		name = ub_major_decision.0001.b_al-qasrayn
	}

	option = { # fallback in case development somehow tumbles
		trigger = { always = no }
		fallback = yes
		name = ub_major_decision.0001.fallback
		custom_tooltip = ub_major_decision.0001.fallback.tt
	}
}

#Other players informed
ub_major_decision.0002 = {
	type = character_event
	title = ub_major_decision.0001.t
	desc = ub_major_decision.0002.desc
	left_portrait = {
		character = scope:founder
		animation = personality_rational
	}
	theme = learning

	option = {
		name = ub_major_decision.0002.a
	}
}
