namespace = senate

senate.0001 = {
	title = senate.0001.t
	desc = senate.0001.desc
	scope = character
	theme = diplomacy
	override_background = {
		event_background = throne_room
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:random_high_senator
		animation = personality_honorable
	}
	immediate = {
		if = {
			limit = {
				OR = {
					access_to_eastern_senate = yes
					any_liege_or_above = {
						access_to_eastern_senate = yes
					}
				}
			}
			random_in_global_list = {
				variable  = high_senate_eastern
				save_scope_as = random_high_senator
			}
		}
		else_if = {
			limit = {
				OR = {
					access_to_italian_senate = yes
					any_liege_or_above = {
						access_to_italian_senate = yes
					}
				}
			}
			random_in_global_list = {
				variable  = high_senate_italy
				save_scope_as = random_high_senator
			}
		}
	}

	option = {
		name = senate.0001.a
		add_prestige = 500
		if = {
			limit = {
				OR = {
					access_to_eastern_senate = yes
					any_liege_or_above = {
						access_to_eastern_senate = yes
					}
				}
			}
			every_in_global_list = {
				variable  = all_senate_eastern
				add_opinion = {
					target = root
					opinion = 50
					years = 5
					modifier = supported_senate
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					access_to_italian_senate = yes
					any_liege_or_above = {
						access_to_italian_senate = yes
					}
				}
			}
			every_in_global_list = {
				variable  = all_senate_italy
				add_opinion = {
					target = root
					opinion = 50
					years = 5
					modifier = supported_senate
				}
			}
		}
	}
}
senate.0002 = {
	title = senate.0002.t
	desc = senate.0002.desc
	scope = character
	theme = diplomacy
	override_background = {
		event_background = throne_room
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:random_high_senator
		animation = personality_honorable
	}
	immediate = {
		if = {
			limit = {
				OR = {
					access_to_eastern_senate = yes
					any_liege_or_above = {
						access_to_eastern_senate = yes
					}
				}
			}
			random_in_global_list = {
				variable  = high_senate_eastern
				save_scope_as = random_high_senator
			}
		}
		else_if = {
			limit = {
				OR = {
					access_to_italian_senate = yes
					any_liege_or_above = {
						access_to_italian_senate = yes
					}
				}
			}
			random_in_global_list = {
				variable  = high_senate_italy
				save_scope_as = random_high_senator
			}
		}
	}

	option = {
		name = senate.0002.a
		add_prestige = 500
		add_piety = 200
		if = {
			limit = {
				OR = {
					access_to_eastern_senate = yes
					any_liege_or_above = {
						access_to_eastern_senate = yes
					}
				}
			}
			every_in_global_list = {
				variable  = all_senate_eastern
				add_opinion = {
					target = root
					opinion = 50
					years = 5
					modifier = supported_senate
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					access_to_italian_senate = yes
					any_liege_or_above = {
						access_to_italian_senate = yes
					}
				}
			}
			every_in_global_list = {
				variable  = all_senate_italy
				add_opinion = {
					target = root
					opinion = 50
					years = 5
					modifier = supported_senate
				}
			}
		}
	}
}
senate.0003 = {
	title = senate.0003.t
	desc = senate.0003.desc
	scope = character
	theme = diplomacy
	override_background = {
		event_background = throne_room
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:random_high_senator
		animation = personality_honorable
	}
	immediate = {
		if = {
			limit = {
				OR = {
					access_to_eastern_senate = yes
					any_liege_or_above = {
						access_to_eastern_senate = yes
					}
				}
			}
			random_in_global_list = {
				variable  = high_senate_eastern
				save_scope_as = random_high_senator
			}
		}
		else_if = {
			limit = {
				OR = {
					access_to_italian_senate = yes
					any_liege_or_above = {
						access_to_italian_senate = yes
					}
				}
			}
			random_in_global_list = {
				variable  = high_senate_italy
				save_scope_as = random_high_senator
			}
		}
	}

	option = {
		name = senate.0003.a
		add_prestige = 750
		add_dread = 10
		if = {
			limit = {
				OR = {
					access_to_eastern_senate = yes
					any_liege_or_above = {
						access_to_eastern_senate = yes
					}
				}
			}
			every_in_global_list = {
				variable  = all_senate_eastern
				add_opinion = {
					target = root
					opinion = 50
					years = 5
					modifier = supported_senate
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					access_to_italian_senate = yes
					any_liege_or_above = {
						access_to_italian_senate = yes
					}
				}
			}
			every_in_global_list = {
				variable  = all_senate_italy
				add_opinion = {
					target = root
					opinion = 50
					years = 5
					modifier = supported_senate
				}
			}
		}
	}
}
senate.0004 = {
	title = senate.0004.t
	desc = senate.0004.desc
	scope = character
	theme = diplomacy
	override_background = {
		event_background = throne_room
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:random_high_senator
		animation = personality_honorable
	}
	immediate = {
		if = {
			limit = {
				OR = {
					access_to_eastern_senate = yes
					any_liege_or_above = {
						access_to_eastern_senate = yes
					}
				}
			}
			random_in_global_list = {
				variable  = high_senate_eastern
				save_scope_as = random_high_senator
			}
		}
		else_if = {
			limit = {
				OR = {
					access_to_italian_senate = yes
					any_liege_or_above = {
						access_to_italian_senate = yes
					}
				}
			}
			random_in_global_list = {
				variable  = high_senate_italy
				save_scope_as = random_high_senator
			}
		}
	}

	option = {
		name = senate.0004.a
		add_prestige = 500
		add_stewardship_lifestyle_xp = 200
		if = {
			limit = {
				OR = {
					access_to_eastern_senate = yes
					any_liege_or_above = {
						access_to_eastern_senate = yes
					}
				}
			}
			every_in_global_list = {
				variable  = all_senate_eastern
				add_opinion = {
					target = root
					opinion = 50
					years = 5
					modifier = supported_senate
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					access_to_italian_senate = yes
					any_liege_or_above = {
						access_to_italian_senate = yes
					}
				}
			}
			every_in_global_list = {
				variable  = all_senate_italy
				add_opinion = {
					target = root
					opinion = 50
					years = 5
					modifier = supported_senate
				}
			}
		}
	}
}
senate.0005 = {
	hidden = yes
	immediate = {
		title:c_roma.holder.top_liege = {
			trigger_event = senate.0006
		}
	}
}
senate.0006 = {
	hidden = yes
	immediate = {
		title:c_roma.holder.top_liege = {
			random_neighboring_top_liege_realm_owner = {
				limit = {
					trigger_if = {
						limit = {
							any_neighboring_top_liege_realm_owner = {
								max_military_strength <= 2000
							}
						}
						max_military_strength <= 2000
					}
					is_alive = yes
					is_landed = yes
					NOT = {
						AND = {
							exists = var:my_suzerain
							var:my_suzerain = title:c_roma.holder.top_liege
							var:my_suzerain = {
								OR = {
									is_target_in_variable_list = { name = non_permanent_tributaries target = prev }  #tributaries are gud
									is_target_in_variable_list = { name = permanent_tributaries target = prev }
								}
							}
						}
					}
				}
				set_global_variable = {
					name = italy_senate_conquer
					value = THIS
				}
			}
		}
	}
}
senate.0007 = {
	hidden = yes
	immediate = {
		title:c_byzantion.holder.top_liege = {
			random_neighboring_top_liege_realm_owner = {
				limit = {
					trigger_if = {
						limit = {
							any_neighboring_top_liege_realm_owner = {
								max_military_strength <= 2000
							}
						}
						max_military_strength <= 2000
					}
					is_alive = yes
					is_landed = yes
					NOT = {
						AND = {
							exists = var:my_suzerain
							var:my_suzerain = title:c_byzantion.holder.top_liege
							var:my_suzerain = {
								OR = {
									is_target_in_variable_list = { name = non_permanent_tributaries target = prev }  #tributaries are gud
									is_target_in_variable_list = { name = permanent_tributaries target = prev }
								}
							}
						}
					}
				}
				set_global_variable = {
					name = eastern_senate_conquer
					value = THIS
				}
			}
		}
	}
}

senate.0008 = {
	title = senate.0008.t
	desc = senate.0008.desc
	scope = character
	theme = diplomacy
	override_background = {
		event_background = throne_room
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:random_high_senator
		animation = personality_honorable
	}
	immediate = {
		save_scope_as = decision_maker_senate
		primary_title = {
			random_past_holder = {
				limit = {
					faith = root.faith
				}
				root = {
					set_variable = {
						name = emperor_senate_selected
						value = PREV
					}
				}
			}
		}
		if = {
			limit = {
				OR = {
					access_to_eastern_senate = yes
					any_liege_or_above = {
						access_to_eastern_senate = yes
					}
				}
			}
			random_in_global_list = {
				variable  = high_senate_eastern
				save_scope_as = random_high_senator
			}
		}
		else_if = {
			limit = {
				OR = {
					access_to_italian_senate = yes
					any_liege_or_above = {
						access_to_italian_senate = yes
					}
				}
			}
			random_in_global_list = {
				variable  = high_senate_italy
				save_scope_as = random_high_senator
			}
		}
	}
	widgets = {
		widget = {
			gui = "event_window_widget_apotheosise_senate"
			container = "senate_emperor_select"
			controller = default
			setup_scope = { root = { save_scope_as = decision_maker_senate } }
		}
	}
	option = {
		name = senate.0008.a
		if = {
			limit = {
				var:emperor_senate_selected.dynasty = root.dynasty
			}
			add_character_modifier = apotheosised_relative
			dynasty = {
				add_dynasty_modifier = apotheosised_dynasty
			}
		}
		else = {
			capital_county = {
				add_county_modifier = apotheosised_emperor_tomb
			}
		}
		var:emperor_senate_selected = {
			add_trait = apotheosised_trait
		}
		if = {
			limit = {
				OR = {
					var:emperor_senate_selected.martial < 5
					var:emperor_senate_selected.diplomacy < 5
					var:emperor_senate_selected.stewardship < 5
					var:emperor_senate_selected.intrigue < 5
					var:emperor_senate_selected.learning < 5
				}
			}
			add_prestige_level = -2
		}
		else_if = {
			limit = {
				OR = {
					var:emperor_senate_selected.martial < 10
					var:emperor_senate_selected.diplomacy < 10
					var:emperor_senate_selected.stewardship < 10
					var:emperor_senate_selected.intrigue < 10
					var:emperor_senate_selected.learning < 10
				}
			}
			add_prestige_level = -1
		}
		clear_variable_list = available_emperors_to_apotheosise
	}
	option = {
		name = senate.0008.b
		add_gold = 150
		add_prestige = 200
		clear_variable_list = available_emperors_to_apotheosise
		remove_character_flag = apotheosised_emperor_in_lifetime
	}
}

senate.0009 = {
	hidden = yes
	immediate = {
		decide_senate_idea = yes
	}
}
